## React Fiber 是什么

Fiber 在英语中翻译为`纤维`，它并不是计算机语言中的新名词，而且与进程，线程同为程序的一种执行过程，纤维给我们的感觉就是很细的意思，所以 React 借助这个概念去划分 react 执行过程中的每一个事件单元，

`React`内部实现的一套状态更新机制。支持任务不同`优先级`，可中断与恢复，并且恢复后可以复用之前的`中间状态`

其中每个任务更新单元为`React Element`对应的 Fiber 节点

在`React`中，Fiber 的表现形式其实就是一种`数据结构`

## 为什么会出现 React Fiber?

在 React16 之前，React 执行更新任务表现为同步更新，父组件的更新会触发子组件的更新，但是子组件的更新是一种同步递归的方式，由于递归执行，所以更新一旦开始，中途就无法中断。当层级很深时，递归更新时间超过了 `16ms`，用户交互就会卡顿，因为浏览器一般的刷新频率是 `60hz`，也就是一秒刷新 `60` 次，每一次的时间大概是 `16.6ms` 的样子，如果 js 时间超过了这个时间，那么就会导致页面卡顿，归根结底还是因为 js 线程和 ui 的渲染线程都是跑在浏览器的主线程里面，他们是互斥的

`React16`引入了`Fiber`这个概念，解决了`React15`的同步更新不可中断的问题，`React16`的更新是异步可中断更新，由于曾经用于递归的虚拟 DOM 数据结构已经无法满足需要。于是，全新的`Fiber`架构应运而生。浏览器的每一次更新过程中，`React`都会向浏览器申请 `5ms` 的一个时间去执行自己的一个更新任务，如果时间到了(大于 16ms)，那么这个更新任务就会暂停，等到下一次渲染的时候继续执行。

## Fiber 的数据结构

<img src='@assets/fiberNode.png' alt="fiberNode"  height="300" />
